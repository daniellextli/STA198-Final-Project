---
title: "Caffeine Consumption and Its Association with Key Health Biomarkers"
authors: "Danielle, Beckett, and Alexia"
format: pdf
knitr:
  opts_chunk:
    echo: false
    warning: false
    message: false
    fig.width: 4
    fig.height: 3
---
## Use of AI tools
We used ChatGPT to help conduct a test on the linearity of the logit assumption for logistic regressions and to create cleaner tables for our logistic regression models.
```{r}
# Loading Libraries/Dataset
library(tidyverse)
library(ggplot2)
library(dplyr)
library(broom)

data <- read_csv("coffee_data.csv") |>
  filter(!is.na(Stress_Level), !is.na(Caffeine_mg)) |> 
  mutate(high_caffeine = factor(ifelse(Caffeine_mg > 400, 1, 0)))
```
## Introduction

Caffeine is the most commonly consumed drug worldwide. Despite its effectiveness as a stimulant, caffeine can cause both psychological and physiological effects on the body (Samoggia & Rezzaghi, 2021). The drug is associated with antagonistic effects on adenosine receptors, which regulate stress, arousal, and fatigue (Reichert et al., 2022). As a result, scientific inquiry has increasingly focused on the potential health impacts of caffeine.

Previous research has consistently linked caffeine use to measurable changes in key health indicators. Studies have shown increases in heart rate and blood pressure following frequent daily consumption (Green & Suls, 1996), and others have associated higher caffeine intake with reduced sleep quality (Akova et al., 2023). Findings on caffeine’s relationship to stress, however, remain mixed and at times contradictory (AlAteeq et al., 2021; Lane & Williams Jr., 1987). Additionally, high caffeine consumption has been positively associated with higher BMI (Tucker & Beltran, 2025).

Despite extensive work on individual health outcomes, relatively few studies examine caffeine’s effects on multiple biomarkers—such as BMI, heart rate, stress, and sleep quality—within a single analytic framework. The goal of this research is to further examine the effects of high caffeine intake on key biomarkers: BMI, heart rate, sleep quality, and stress levels. A clearer understanding of caffeine’s impact on health may inform public health practices and guidelines. Identifying which groups are most at risk could help target interventions and encourage individuals to monitor their consumption before negative effects occur.

The present study uses the “Global Coffee Health Dataset,” which contains 10,000 synthetic records. The dataset includes “patients” from 20 countries and provides information on daily coffee intake, caffeine levels, sleep duration and quality, BMI, heart rate, stress, physical activity, health issues, occupation, smoking, and alcohol consumption. Its aim is to simulate real-world data on caffeine consumption, sleep, and health outcomes to support wellness research using logistic analysis and predictive modeling.

```{r, fig.cap="Distribution of Participants by Country"}
# Distribution of participants by country
ggplot(data, aes(x = Country)) +
  geom_bar(color = "darkgrey", fill = "lightblue") +
  labs(
    x = "Country",
    y = "Number of Participants",
    title = "Number of Participants per Country"
  ) +
  theme_bw() +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))
```
Overall, Figure 1 shows that the distribution is fairly balanced, with most countries contributing a similar number of participants, approximately between the mid-400s to low-500s. A few countries show slightly higher participation, while others are slightly below the average, but no extreme outliers are visible. This suggests that the sample is relatively evenly distributed across the included countries.

```{r, fig.cap="Distribution of Participants' Gender"}
# gender distribution
ggplot(data, aes(x = Gender)) +
  geom_bar(fill = "lightcoral", color = "black") +
  labs(title = "Gender Distribution", y = "Count", x = "Gender") +
  theme_bw()
```
Figure 2 presents the number of participants identifying as Female, Male, or Other. The majority of participants identify as either Female or Male, with both groups contributing roughly similar counts (approximately 5,000 each). A much smaller portion of the sample identifies as Other (~250), indicating limited representation in that category. Overall, the figure highlights a largely binary gender distribution within the participant pool.

```{r, fig.cap="Distribution of Participants' Age"}
# age distribution
ggplot(data, aes(x = Age)) +
  geom_histogram(binwidth = 5, fill = "lightblue", color = "black") +
  labs(title = "Age Distribution of Participants", x = "Age (years)", y = "Count") +
  theme_bw()

```
Figure 3 displays the distribution of participants’ ages, showing that most individuals fall between their early 20s and mid-40s. The largest concentrations appear around the late 20s to late 30s, while the participation declines steadily after about age 45, with very few individuals above age 60. Overall, the age distribution is right-skewed, with its tail extending into older ages.

## Methodology
This study fit logistic regression models to examine the association between high caffeine consumption and four predictors: BMI, heart rate, sleep quality, and stress level. Logistic regression was appropriate because the outcome variable—high caffeine intake—was binary, defined using the FDA threshold of 400 mg/day. All variables used in the models contained no missing values. The baseline for outcome was considered "low caffeine" intake <400 mg/day. The baseline for stress level was "high," and the baseline for sleep quality was "Excellent".

When an initial model including both sleep quality and stress level was fit, two stress-level coefficients were not estimable due to perfect or near-perfect collinearity between the two categorical predictors (Appendix A). Because his violated the assumption of no perfect multicollinearity, we fit two separate logistic regression models: Model 1 included BMI, heart rate, and sleep quality, while Model 2 included BMI, heart rate, and stress level. This approach allowed each variable to be evaluated independently without violating assumptions of logistic regression.
\begin{enumerate}
\item $\log\left(\frac{p_i}{1 - p_i}\right) =\beta_0+\beta_1 \text{BMI}_i+\beta_2 \text{HeartRate}_i+ \beta_{3}(\text{Sleep}_i = \text{Good}) + \beta_{4} (\text{Sleep}_i = \text{Fair}) + \beta_{5} (\text{Sleep}_i = \text{Poor})$
\item $\log\left(\frac{p_i}{1 - p_i}\right) =\beta_0+\beta_1 \text{BMI}_i+\beta_2 \text{HeartRate}_i + \beta_{3} (\text{Stress}_i = \text{Low}) + \beta_{4} (\text{Stress}_i = \text{Medium})$
\end{enumerate}

Our null hypothesis when considering our regression was, when holding the non target variables (BMI, sleep quality, stress level, or heart rate) constant, the slope parameter is 0; therefore, there is no relationship between the specified targeted variable and outcome. Our alternative hypothesis when considering our regression was, when holding the non target variables (BMI, sleep quality, stress level, or heart rate) constant, the slope parameter is not 0; therefore, there is relationship between the specified targeted variable and outcome. We are considering statistical significance at $\alpha=0.05$. 
\begin{table}[H]
\centering
\begin{tabular}{lll}
\hline
\textbf{Predictor} & \textbf{Null Hypothesis ($H_0$)} & \textbf{Alternative Hypothesis ($H_1$)} \\
\hline
BMI & $\beta_1 = 0$ & $\beta_1 \ne 0$ \\
Heart Rate & $\beta_2 = 0$ & $\beta_2 \ne 0$ \\
Sleep: Good vs Excellent & $\beta_3 = 0$ & $\beta_3 \ne 0$ \\
Sleep: Fair vs Excellent & $\beta_4 = 0$ & $\beta_4 \ne 0$ \\
Sleep: Poor vs Excellent & $\beta_5 = 0$ & $\beta_5 \ne 0$ \\
Stress: Low vs High & $\beta_3 = 0$ & $\beta_3 \ne 0$ \\
Stress: Medium vs High & $\beta_4 = 0$ & $\beta_4 \ne 0$ \\
\hline
\end{tabular}
\caption{Null and Alternative Hypotheses for Logistic Regression Coefficients}
\end{table}
It is also important to analyze the assumptions that accompany these tests: linearity of log odds and independence of observations. Although the data is synthetic, this doesn’t prove that either assumptions are valid. For independence to be met, each observation must provide unique data that is not influenced by another observation. In the real world of clinical trials, this kind of data would come from taking biomarkers of two patients who have no overlapping lifestyles, where neither of these patients has the opportunity to affect the data of the other. However, an example of non-independent data would be if the data was taken from siblings. In this study, we assume the former. Linearity of the log-odds was tested using the Box–Tidwell procedure, which showed no evidence of violation (Appendix B).The methodology provided is replicable and assumes that the requirement of a binary outcome variable, followed by a logistic regression model, can predict (with limitations due to uncertainty of assumptions verification) how levels of caffeine consumption relate to various health markers.

## Results
Table 2 presents a logistic regression examining the association between high caffeine intake and sleep quality, including BMI and heart rate as additional predictors.
```{r}
m1 <- glm(high_caffeine ~ BMI + Heart_Rate + factor(Sleep_Quality), 
          data = data,
          family = "binomial")
```
\begin{table}[H]
\centering
\begin{tabular}{lcccc}
\hline
\textbf{Variable} & \textbf{Estimate} & \textbf{P-value} & \textbf{Odds Ratio} & \textbf{95\% CI for OR} \\
\hline
(Intercept) & -3.31 & $< 2\times10^{-16}$ & 0.036 & (0.020, 0.067) \\
BMI & -0.000289 & 0.971 & 0.9997 & (0.985, 1.015) \\
Heart Rate & 0.00910 & 0.00333 & 1.009 & (1.002, 1.016) \\
Sleep Quality: Fair & 0.981 & $8.75 \times 10^{-15}$ & 2.67 & (2.08, 3.42) \\
Sleep Quality: Good & 0.612 & $2.47 \times 10^{-7}$ & 1.84 & (1.46, 2.33) \\
Sleep Quality: Poor & 1.33 & $< 2 \times 10^{-16}$ & 3.79 & (2.90, 4.95) \\
\hline
\end{tabular}
\caption{Logistic Regression of High Caffeine Intake (with Sleep Quality Predictor)}
\end{table}
Table 3 shows a logistic regression examining the association between high caffeine intake and stress level, with BMI and heart rate as additional predictors.
```{r}
m2 <- glm(high_caffeine ~ BMI + Heart_Rate + factor(Stress_Level),
          data = data,
          family = "binomial")
```
\begin{table}[H]
\centering
\begin{tabular}{lcccc}
\hline
\textbf{Variable} & \textbf{Estimate} & \textbf{P-value} & \textbf{Odds Ratio} & \textbf{95\% CI for OR} \\
\hline
(Intercept) & -1.98 & $5.22\times10^{-11}$ & 0.138 & (0.077, 0.249) \\
BMI & -0.00124 & 0.873 & 0.999 & (0.984, 1.014) \\
Heart Rate & 0.00944 & 0.00230 & 1.009 & (1.003, 1.016) \\
Stress Level: Low & -0.816 & $<2\times10^{-16}$ & 0.442 & (0.372, 0.526) \\
Stress Level: Medium & -0.351 & 0.000459 & 0.704 & (0.579, 0.857) \\
\hline
\end{tabular}
\caption{Logistic Regression of High Caffeine Intake (with Stress Level Predictor)}
\end{table}

Table 2's and Table 3's results indicate that there is sufficient evidence that several physiological and behavioral factors have a significant relationship with high caffeine consumption. In both Table 2 and 3, heart rate emerged as a significant positive predictor (p=0.002), with each unit increase in heart rate multiplying the participant's predicted odds of high caffeine intake by 1.0095, while holding all other variables constant. Sleep quality in Table 2 also showed strong associations, where individuals reporting fair, good, or poor sleep quality had statistically significantly higher odds of high caffeine consumption compared to the reference group, as reflected by the log odds coefficients and significant p-values (all less than 0.05), while holding all other variables constant. Stress level had a similar relationship in Table 3; when we hold all other variables constant, both low and medium stress categories significantly predict the odds of high caffeine intake relative to the high-stress reference group (both p < 0.001 with patient's predicted odds of high caffeine intake multiplied by 0.442 and 0.704, respectively). In contrast, when we hold all other variables constant, BMI was not a significant predictor (p = 0.97) in either Table 2 or Table 3, indicating there was insufficient evidence to support a statistically significant relationship with high caffeine consumption in this dataset.

## Discussion 
The primary goal of this study was to evaluate how caffeine consumption relates to key health markers—BMI, heart rate, sleep quality, and stress level. We successfully identified several physiological and behavioral variables that predict high caffeine intake.

Our logistic regression models effectively identify the health factors associated with high caffeine consumption. Heart rate, sleep quality, and stress level consistently emerged as significant predictors of consuming more than 400 mg of caffeine per day. These results suggest that caffeine intake is linked to physiological and psychological states, particularly stress and sleep patterns. In contrast, BMI did not appear to be a significant predictor.

Logistic regression was an appropriate starting point for predicting a binary threshold of high caffeine intake. However, several limitations emerged. Category imbalance and redundancy between variables prevented certain levels of sleep quality and stress from being included simultaneously. Alternative approaches, such as regularized logistic regression (LASSO or ridge), decision trees, or random forest models, could better handle correlated predictors and complex interactions (Wohlwend, 2023). Additionally, assessing multicollinearity formally using variance inflation factors would further strengthen the reliability of model selection.

Data quality also introduces constraints on validity. Because the dataset consists of synthetic health records, the associations identified may not fully reflect real-world variability in caffeine use or health outcomes. Synthetic data often smooths over noise, reducing natural variance between observations and producing artificial linear relationships (Melton, 2025). In addition, due to being synthetic data, contextual information about the caffeine intake can not be found though they may influence caffeine’s physiological effects.

If this study were conducted again in the future, several improvements would strengthen the analysis. First, incorporating real-world observational data would significantly improve external validity and correlations. Second, including additional variables, such as socioeconomic status, occupation, genetics, and chronic health conditions, would offer a more comprehensive understanding of caffeine’s impact as well as allowing us to conclude stronger relationships.

Overall, our findings suggest that high caffeine consumption is strongly associated with higher heart rate, lower sleep quality, and heightened stress, but not BMI. While the results partially meet the goals of the study, limitations in data quality and model choice constrain the conclusions. Future studies employing larger, real datasets and more flexible modeling techniques would better capture the behavioral and physiological mechanisms underlying high caffeine intake.

\begin{thebibliography}{99}

\bibitem{healthline2025}
Caffeine in Tea vs.\ Coffee: How Do They Compare? (n.d.). Retrieved November 20, 2025, from \url{https://www.healthline.com/nutrition/caffeine-in-tea-vs-coffee#caffeine-concerns}

\bibitem{fda2024}
Commissioner, O.\ of the. (2024). \textit{Spilling the Beans: How Much Caffeine is Too Much?} FDA. \url{https://www.fda.gov/consumers/consumer-updates/spilling-beans-how-much-caffeine-too-much}

\bibitem{green1996}
Green, P.\ J., \& Suls, J. (1996). The effects of caffeine on ambulatory blood pressure, heart rate, and mood in coffee drinkers. \textit{Journal of Behavioral Medicine}, 19(2), 111--128. \url{https://doi.org/10.1007/BF01857602}

\bibitem{melton2025}
Melton, A. (2025). \textit{Synthetic Data in Healthcare: When It Works \& When It Fails}. Invene.com. \url{https://www.invene.com/blog/synthetic-data-healthcare}

\bibitem{reichert2022}
Reichert, C.\ F., Deboer, T., \& Landolt, H. (2022). Adenosine, caffeine, and sleep–wake regulation: State of the science and perspectives. \textit{Journal of Sleep Research}, 31(4), e13597. \url{https://doi.org/10.1111/jsr.13597}

\bibitem{reyes2018}
Reyes, C.\ M., \& Cornelis, M.\ C. (2018). Caffeine in the Diet: Country-Level Consumption and Guidelines. \textit{Nutrients}, 10(11), 1772. \url{https://doi.org/10.3390/nu10111772}

\bibitem{samoggia2021}
Samoggia, A., \& Rezzaghi, T. (2021). The Consumption of Caffeine-Containing Products to Enhance Sports Performance: An Application of an Extended Model of the Theory of Planned Behavior. \textit{Nutrients}, 13(2), 344. \url{https://doi.org/10.3390/nu13020344}

\bibitem{supplements2014}
Supplements, P.\ C. for a W.\ on P.\ H.\ H.\ A.\ with C.\ of C.\ in F.\ and D., Board, F.\ and N., Policy, B.\ on H.\ S., \& Medicine, I.\ of. (2014). Intake and Exposure to Caffeine. In \textit{Caffeine in Food and Dietary Supplements: Examining Safety: Workshop Summary}. National Academies Press (US). \url{https://www.ncbi.nlm.nih.gov/books/NBK202226/}

\bibitem{temple2011}
Temple, J.\ L., \& Ziegler, A.\ M. (2011). Gender Differences in Subjective and Physiological Responses to Caffeine and the Role of Steroid Hormones. \textit{Journal of Caffeine Research}, 1(1), 41--48. \url{https://doi.org/10.1089/jcr.2011.0005}

\bibitem{verweij2018}
Verweij, K.\ J.\ H., Treur, J.\ L., \& Vink, J.\ M. (2018). Investigating causal associations between use of nicotine, alcohol, caffeine and cannabis: A two-sample bidirectional Mendelian randomization study. \textit{Addiction}, 113(7), 1333--1338. \url{https://doi.org/10.1111/add.14154}

\bibitem{wohlwend2023}
Wohlwend, B. (2023, July 14). Three Regression Models for Data Science: Linear Regression, Lasso Regression, and Ridge Regression. \textit{Medium}. \url{https://medium.com/@brandon93.w/three-regression-models-for-data-science-linear-regression-lasso-regression-and-ridge-regression-6aac73c0d7a5}

\end{thebibliography}


## Appendix A
This study fit two logistic regression models examining the associations between high caffeine consumption and four predictors: BMI, sleep quality, stress level, and heart rate. All variables had no missing values and therefore required no imputation. An initial model including all four predictors was attempted:
```{r}
m3 <- glm(high_caffeine ~ BMI + Heart_Rate + factor(Sleep_Quality) + factor(Stress_Level), 
          data = data,
          family = "binomial")
```
\begin{table}[H]
\centering
\begin{tabular}{lcc}
\hline
\textbf{Variable} & \textbf{Estimate} & \textbf{P-value} \\
\hline
(Intercept) & -3.31 & $< 2 \times 10^{-16}$ \\
BMI & -0.0003 & 0.971 \\
Heart Rate & 0.009  & 0.00333 \\
Sleep Quality: Fair & 0.981 & $8.75 \times 10^{-15}$ \\
Sleep Quality: Good & 0.612 & $2.47 \times 10^{-7}$ \\
Sleep Quality: Poor & 1.332 & $< 2 \times 10^{-16}$ \\
Stress Level: Low & NA & NA \\
Stress Level: Medium & NA & NA \\
\hline
\end{tabular}
\caption{Logistic Regression of High Caffeine Intake (with All Predictors)}
\end{table}

However, Table 4 indicates that two coefficient estimates were not defined due to singularities, specifically for the Low and Medium categories of stress level. This suggests perfect or near-perfect collinearity between the categorical predictors (sleep quality and stress level), preventing the model from estimating all parameters. Because the full model could not be reliably estimated, the analysis was separated into two logistic regression models: one including sleep quality (but excluding stress level), and one including stress level (but excluding sleep quality). This approach resolved the singularity issue and allowed each predictor to be evaluated without collinearity constraints.

## Appendix B
The test for the linearity of log odds can only be conducted on continuous variables, (e.g., BMI, Heart Rate). Categorical variables (Sleep_Quality, Stress_Level) can't be tested. Categorical variables are converted to dummy variables automatically in R if they are factors, which we confirmed they were using the factor function. The model estimates log-odds differences relative to the reference, so there is no linearity assumption because each category is treated separately. To test the linearity of the logit assumption in logistic regression in R, we ran a Box–Tidwell test (logit linearity test).
```{r}
data$BMI_log <- data$BMI * log(data$BMI)
data$HR_log  <- data$Heart_Rate * log(data$Heart_Rate)
lin_test <- glm(high_caffeine ~ BMI + BMI_log +
                                Heart_Rate + HR_log +
                                Sleep_Quality + Stress_Level,
              data = data,
              family = binomial)
```
\begin{table}[H]
\centering
\begin{tabular}{lcc}
\hline
\textbf{Variable} & \textbf{Estimate} & \textbf{P-value} \\
\hline
(Intercept) & -4.27 & 0.148 \\
BMI & 0.061  & 0.837 \\
BMI\_log & -0.015 & 0.836 \\
Heart Rate & 0.055  & 0.759 \\
HR\_log & -0.009 & 0.798 \\
Sleep Quality: Fair & 0.981 & $9.0 \times 10^{-15}$ \\
Sleep Quality: Good & 0.612 & $2.5 \times 10^{-7}$ \\
Sleep Quality: Poor & 1.33 & $< 2 \times 10^{-16}$ \\
\hline
\end{tabular}
\caption{Box–Tidwell Test for Logit Linearity Test}
\end{table}
Table 5 shows that the p-values for the BMI_log and HR_log terms (0.836 and 0.798, respectively) both exceed 0.05. This indicates insufficient evidence of non-linearity, and therefore the linearity assumption is considered to be satisfied.

